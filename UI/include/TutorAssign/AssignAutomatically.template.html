<?php $langTemplate='TutorAssign_Automatically';Language::loadLanguageFile('de', $langTemplate, 'json', dirname(__FILE__).'/'); ?>

<?php
if (isset($AssignAutomaticallyNotificationElements)) {
    foreach ($AssignAutomaticallyNotificationElements as $notificationElement) {
        print $notificationElement;
    }
}
?>

<input type="hidden" name="action" value="AssignAutomatically">
<div class="content-element">
    <div class="content-header">
        <?php echo MakeInfoButton('tutorAssign','automatically.md'); ?>
        <div class="content-title left uppercase"><?php echo Language::Get('main','title', $langTemplate); ?></div>
        <button class="text-button right bold info-color"><?php echo Language::Get('main','execute', $langTemplate); ?></button>
    </div>

    <div class="content-body-wrapper">
        <div class="content-body">
            <div>
                <label class="form-field label bold">
                    <?php echo Language::Get('main','assignInGroups', $langTemplate); ?>:
                </label>
            </div>
            <div>
                <?php $statusList = CourseStatus::getStatusDefinition();
                foreach ($tutorAssignments as $tutorAssignment){
                    $tutorId = isset($tutorAssignment['tutor']['id']) ? $tutorAssignment['tutor']['id'] : null;
                    
                    if (isset($tutorAssignment['tutor']['id']) && $tutorAssignment['tutor']['userName'] != "unassigned"){
                        echo "<div style='display:inline-block;margin-right:10px' class=''>";
                        print '<input type="checkbox" name="tutorIds[]" value="';
                        print $tutorId . '" id="';
                        print $tutorId . '" />';


                        print '<label for="';
                        print $tutorId . '" class="tutor-name">';
                        print isset($tutorAssignment['tutor']['firstName']) ? $tutorAssignment['tutor']['firstName'].' ' : '';
                        print isset($tutorAssignment['tutor']['lastName']) ? $tutorAssignment['tutor']['lastName'].' ': '';
                        $status = isset($tutorAssignment['tutor']['courses'][0]['status']) ? ','.$statusList[$tutorAssignment['tutor']['courses'][0]['status']] : '';
                        echo isset($tutorAssignment['tutor']['userName']) ? '('.$tutorAssignment['tutor']['userName'].$status.')' : '';
                        print "(" . count($tutorAssignment['submissions']) . ")";
                        print '</label>';
                        echo "</div>";
                    }
                }
                ?>
            </div>
        </div>
    </div> <!-- end: content-body-wrapper -->
</div> <!-- end: content-element -->